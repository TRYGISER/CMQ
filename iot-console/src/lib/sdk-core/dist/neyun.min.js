!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.NEYUN=t():e.NEYUN=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1);Object.defineProperty(t,"Service",{enumerable:!0,get:function(){return r(o).default}});var i=n(2);Object.defineProperty(t,"createAPI",{enumerable:!0,get:function(){return r(i).default}})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,n,o){r(this,e),this.serverName=t,this.request=n,this.$env={},o&&(this.apis=o,this.$config(Object.keys(o),o))}return o(e,[{key:"$requestWrap",value:function(e,t){var n=void 0;if(t.check&&!1===t.check(e))throw new Error("check data error",e);return t.mock&&(n=t.mock(e)),n&&n.then?n:this.request(e)}},{key:"$config",value:function(e,t){var n=this;return t=t||this.apis,(Array.isArray(e)?e:Object.keys(e)).forEach(function(r){var o=n;(Array.isArray(e)?e.includes(r):!0===e[r])?n[r]=function e(n){var i=t[r];if(!i)throw new Error("no such api, check api config");return o.$requestWrap(i.init(this)(n),e)}:n[r]=e[r]}),this}},{key:"$setENV",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(this.$env,e),this}},{key:"$set",value:function(e,t){return this.$env[e]=t,this}},{key:"$get",value:function(e){return this.$env[e]}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){var n={};return Object.keys(e).forEach(function(r){n[r]=new a(e[r],t)}),e={},n}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=o;var u=n(3),c=["PATCH","POST","PUT"],a=function(){function e(t,n){r(this,e);var o=t.url;this.url=o.path,this.serverName=n,this.query=o.query,this.method=o.method.toUpperCase(),this.headers=t.headers,this.config=t.config,this.body=t.body}return i(e,[{key:"init",value:function(e){var t=this;return function(n){var r=(e.$env,t.method);n=n||{};var o=t.url,i=n.path;i&&(o=(0,u.resolvePath)(o,i));var a=n.query;a||Object.keys(n).forEach(function(e){var t=n[e];["headers","config","body","path"].includes(e)||(a[e]=t)});var s=Object.assign({},t.query,a),f=Object.assign({},t.headers,n.headers),l=Object.assign({},t.config,n.config),d="";return c.includes(r)&&(d=Array.isArray(n.body)?n.body:Object.assign({},t.body,n.body)||d),o=(0,u.concatURL)(o,s),{url:o,body:d,headers:f,method:r,config:l,query:s,path:i}}}}]),e}()},function(e,t,n){"use strict";function r(e){return"string"==typeof e}function o(e){return-1!==Object.prototype.toString.call(e).indexOf("Object")}function i(e,t){var n="";return n=r(t)?t:o(t)?c(t):(t||"").toString(),n&&(e+=(-1===e.indexOf("?")?"?":"&")+n),e}function u(e,t){return e&&o(t)?e.replace(/\{(.*?)\}/g,function(e,n){return t[n]||e}):e}Object.defineProperty(t,"__esModule",{value:!0}),t.isString=r,t.isObject=o,t.concatURL=i,t.resolvePath=u;var c=function(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}}])});